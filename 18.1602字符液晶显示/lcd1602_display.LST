C51 COMPILER V9.00   LCD1602_DISPLAY                                                       05/02/2016 13:38:07 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE LCD1602_DISPLAY
OBJECT MODULE PLACED IN lcd1602_display.OBJ
COMPILER INVOKED BY: G:\Keil\C51\BIN\C51.EXE lcd1602_display.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*
   2           * 1602 Һʾ
   3             2016 - 4 - 28 4 21:10 PM
   4          
   5             1602 ַҺ 8 λ ASCII 룬ҺʾַȻҪһתḶ́ȻתҪ
             -ʱ䣬ǶҺвʱҺڽҪ֪ҺǷСҺǷеı־״̬ STA
   6             Ͽ֪ 1602 κβҪʵּ״̬֣STA  λ STA7 ʾҺǷԽжд
             - STA7 = 1 ôֹκζдSTA7 = 0,ͱʾв
   7          
   8            1. 
   9                  1. ״̬ RS = 0 RW = 1 E = 1 ҺὫ STA  DB 
  10                  2. ݣ RS = 1 RW = 1 E = 1 Һݵ DB 
  11                  3. дָ RS = 0 RW = 0 ָ DB ڣ E ø Ȼ õͣҺָ
  12                  4. дݣ RS = 1 RW = 0 ݵ DB ڣ E ø Ȼ õͣҺ
  13             ע⣺  E ᵼҺϢܻ裬ھܵҺ E ڱֵ͵ƽ
  14          
  15            2. ָ˵
  16                  ָ 8'b00111000 -- 0x38 Һʹ 57 ʹ 8 λݽӿ
  17                  ָ 8'b00001DCB -- D = 1 ʾ D = 0 رʾ
  18                                                           C = 1 ʾ꣬ C = 0 رչ
  19                                                           B = 1 ˸꣬ B = 0 ˸
  20                  ָ 8'b00000001 -- ָ ָ㲢ʾ
  21                  ָ 8'b00000010 -- ָ
  22          
  23            3. ַ˵
  24                  1602  RAM Ŵʾַһк͵ڶеĵֱַΪ
  25                          0x00 ------ 0x0F 0x10 ------ 0x27
  26                          0x40 ------ 0x4F 0x50 ------ 0x67
  27                  ֻǰ 16 ֽʾΪƶĻõġ
  28                  ҪʾʱҪдַȻдݣַдָдͬǰָλ
             - 0 ַҪֿдַʱҪַλ 1Ҫ 0x00 ʾ ַ 'A'
  29                  Ҫдַ
  30                          RS = 0;
  31                          RW = 0;
  32                          DB = 0x00 | 0x80;       // 0x80 = 8'b1000_0000
  33                          E = 1;
  34                          E = 0;
  35                  дݣ
  36                          RS = 1;
  37                          RW = 0;
  38                          DB = 0x41;                      // 0x41 = 65 'A'
  39                          E = 1;
  40                          E = 0;
  41          
  42                  Ŀʾһַ "Hello World"Ҫʾַʵֵķ
  43                  ÿοһַʾַ 1 һַжϵ '\0' ʱ
  44           *
  45          **/
  46          #include<reg52.h>
  47          
  48          #define DB P0
  49          sbit RS = P1^0;
  50          sbit RW = P1^1;
  51          sbit E = P1^5;
  52          
C51 COMPILER V9.00   LCD1602_DISPLAY                                                       05/02/2016 13:38:07 PAGE 2   

  53          // עַ⣬UTF-8 Ǽʾ
  54          unsigned char str0[] = "Hello World";
  55          
  56          void busy_check(void);
  57          void write_command(unsigned char command);
  58          void write_data(unsigned char mydata);
  59          void lcd_init(void);
  60          void lcd_line1_display(unsigned char *str);
  61          
  62          void main(void){
  63   1              lcd_init();
  64   1              lcd_line1_display(str0);
  65   1              while(1);
  66   1      }
  67          
  68          // æ⣬ʱ
  69          void busy_check(void){
  70   1              unsigned char sta = 0;
  71   1              RS = 0;
  72   1              RW = 1;
  73   1              do{
  74   2                      E = 1;
  75   2                      sta = DB;
  76   2                      E = 0;
  77   2              }while(sta&0x80);
  78   1      }
  79          
  80          // дָ/ַ
  81          void write_command(unsigned char command){
  82   1              RS = 0;
  83   1              RW = 0;
  84   1              DB = command;
  85   1              E = 1;
  86   1              E = 0;
  87   1      }
  88          
  89          // д
  90          void write_data(unsigned char mydata){
  91   1              RS = 1;
  92   1              RW = 0;
  93   1              DB = mydata;
  94   1              E = 1;
  95   1              E = 0;
  96   1      }
  97          
  98          // Һʼ
  99          void lcd_init(void){
 100   1              busy_check();
 101   1              write_command(0x38);    //5*7 ʾ 8 λ
 102   1              busy_check();
 103   1              write_command(0x0C);    //ʾʾ꣬겻˸
 104   1              busy_check();
 105   1              write_command(0x06);
 106   1              busy_check();
 107   1              write_command(0x01);    //
 108   1      }
 109          
 110          // Һһʾ
 111          void lcd_line1_display(unsigned char *str){
 112   1              unsigned char i = 0;
 113   1              while(*str != '\0'){
 114   2                      busy_check();
C51 COMPILER V9.00   LCD1602_DISPLAY                                                       05/02/2016 13:38:07 PAGE 3   

 115   2                      write_command(0x80 | i);
 116   2                      busy_check();
 117   2                      write_data(*str++);
 118   2                      i++;
 119   2              }
 120   1      }
 121          
 122          
 123          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    137    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     12       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
