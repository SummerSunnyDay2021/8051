C51 COMPILER V8.06   TIMER                                                                 04/17/2016 08:19:02 PAGE 1   


C51 COMPILER V8.06, COMPILATION OF MODULE TIMER
OBJECT MODULE PLACED IN timer.OBJ
COMPILER INVOKED BY: G:\Keil\C51\BIN\C51.EXE timer.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*
   2             ʱʵ 
   3             ʱ䣺 2016-4-17 9:54 *7
   4          
   5             Ҫʱ 50 ms led ˸
   6                          
   7           1. TMOD ʱģʽĴTMOD  8 λ 4 λΪ timer0  4 λΪ timer1
   8                 7   6  5  4 |    3   2  1  0
   9              GATE C/T M1 M0 | GATE C/T M1 M0 -- λѰַ
  10              
  11                  ֻ漰 timer0 4 λﲻܣ
  12                          -- GATE λ  1 ڲⲿźŵڣﲻ 0
  13                          -- C/T λ  1 ʱ  0 ڶʱ
  14                          -- M1/M0 λ趨ʽ
  15                                  == 0/0  8048  13 λʱģʽǲ
  16                                  == 0/1 16 λʱģʽ
  17                                  == 1/0 8 λԶװ THx еֵԶװ TLx 
  18                                  == 1/1  ʱ timer1  timer0 Ϊ 8 λʱ
  19                  ǵֵΪ 8'bXXXX_0001
  20          
  21           2. 趨ʱ洢Ĵ
  22                  TH1 TL1 TH0 TL0 --- λԶ
  23                  洢Ĵ 16 λ 0x0000 -- 0xFFFFʱÿڼ 1 12 ʱڵ 1 ڣ
             -Ҫʱ t msϵľΪ 11.0592MHzôʱ洢Ĵļ㷽Ϊ
  24                  ȼ㾧ڣ 1/(11.0592*10^6)  9.04*10^-8 s
  25                  ڣ 9.04*10^-8 * 12  1.085*10^-6 s
  26                  Ҫ 50ms = 0.05 s     0.05/(1.085*10^-6)  46083
  27                  õҪֵ 0xFFFF = 65535 65535 - 46083 = 19452  19452 = 0x4BFC
  28                  TH0 = 0x4B, TL0 = 0xFC
  29                  
  30          
  31           3. TCONʱƼĴ
  32                    7  6  5  4  3  2  1  0
  33                  TF1TR1TF0TR0IE1IT1IE0IT0 -- λѰַ
  34                          -- TF0 ʱ timer0 ʶλӲ 1ҪʹöʱжӲ
  35                          -- TR0 ʱ timer0 λ 1 ʱ 0 ֹͣʱ
  36                          -- IE0  IT0 ⲿжϣȲ
  37          **/
  38          
  39          
  40          #include <reg52.h>
  41          
  42          sbit LED0 = P0^0;
  43          sbit ADDR0 = P1^0;
  44          sbit ADDR1 = P1^1;
  45          sbit ADDR2 = P1^2;
  46          sbit ADDR3 = P1^3;
  47          sbit ENLED = P1^4;
  48          
  49          void main(void) {
  50   1      //*******************//
  51   1              ADDR0 = 0;
  52   1              ADDR1 = 1;
  53   1              ADDR2 = 1;
  54   1              ADDR3 = 1;
C51 COMPILER V8.06   TIMER                                                                 04/17/2016 08:19:02 PAGE 2   

  55   1              ENLED = 0;      
  56   1      //******************//
  57   1              TMOD = 0x01;
  58   1              TH0 = 0x4B;
  59   1              TL0 = 0xFC;
  60   1              TR0 = 1;
  61   1      //*****************//
  62   1              while(1){
  63   2                      unsigned char cnt;
  64   2                      if(TF0) {
  65   3                              cnt = cnt + 1;
  66   3                              TF0 = 0;
  67   3                              TH0 = 0x4B;
  68   3                              TL0 = 0xFC;
  69   3                              if(cnt>=10) {
  70   4                                      LED0 = !LED0;
  71   4                                      cnt = 0;
  72   4                              }       
  73   3                      }
  74   2                              
  75   2              }
  76   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     48    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
